[gd_scene load_steps=19 format=3 uid="uid://cadnxpfwar70q"]

[ext_resource type="PackedScene" uid="uid://cw7a7d30oh8r0" path="res://scenes/player/player.tscn" id="1_6u2if"]
[ext_resource type="PackedScene" uid="uid://b8fanqt6wmmmm" path="res://scenes/npc/combat_test_target.tscn" id="2_w35bc"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_upc4k"]
albedo_color = Color(0.74902, 0.729412, 0.776471, 1)

[sub_resource type="PlaneMesh" id="PlaneMesh_elu0w"]
material = SubResource("StandardMaterial3D_upc4k")
size = Vector2(20, 20)
subdivide_width = 4
subdivide_depth = 4

[sub_resource type="BoxShape3D" id="BoxShape3D_lex84"]
size = Vector3(20, 0.1, 20)

[sub_resource type="BoxMesh" id="BoxMesh_ft5j5"]
size = Vector3(0.2, 2, 20)

[sub_resource type="BoxShape3D" id="BoxShape3D_dn77b"]
size = Vector3(0.2, 2, 20)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_wabsd"]
albedo_color = Color(0.564706, 0.0745098, 0.294118, 1)

[sub_resource type="BoxMesh" id="BoxMesh_b5i6k"]
material = SubResource("StandardMaterial3D_wabsd")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_mjrjg"]
albedo_color = Color(0.219608, 0.368627, 0.780392, 1)

[sub_resource type="BoxMesh" id="BoxMesh_d8kws"]
material = SubResource("StandardMaterial3D_mjrjg")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_072v3"]
albedo_color = Color(0.192157, 0.6, 0.392157, 1)

[sub_resource type="BoxMesh" id="BoxMesh_igwde"]
material = SubResource("StandardMaterial3D_072v3")

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_iwojf"]

[sub_resource type="Sky" id="Sky_f5r8h"]
sky_material = SubResource("ProceduralSkyMaterial_iwojf")

[sub_resource type="Environment" id="Environment_4ojpr"]
background_mode = 2
sky = SubResource("Sky_f5r8h")
ambient_light_source = 3
ambient_light_energy = 3.0

[sub_resource type="NavigationMesh" id="NavigationMesh_fnhne"]
vertices = PackedVector3Array(-24.5, 1, -24.5, -24.5, 1, 24.5, 24.5, 1, 24.5, 24.5, 1, -24.5)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1)]

[sub_resource type="BoxMesh" id="BoxMesh_bxdx3"]
size = Vector3(50, 1, 50)

[node name="TestLevel" type="Node3D"]

[node name="Player" parent="." instance=ExtResource("1_6u2if")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="Environment" type="Node3D" parent="."]

[node name="Ground" type="StaticBody3D" parent="Environment"]
collision_layer = 2
collision_mask = 0

[node name="GroundMesh" type="MeshInstance3D" parent="Environment/Ground"]
mesh = SubResource("PlaneMesh_elu0w")

[node name="GroundCollision" type="CollisionShape3D" parent="Environment/Ground"]
shape = SubResource("BoxShape3D_lex84")

[node name="Walls" type="Node3D" parent="Environment"]

[node name="Wall1" type="StaticBody3D" parent="Environment/Walls"]
transform = Transform3D(-0.0078015, 0, 0.99997, 0, 1, 0, -0.99997, 0, -0.0078015, 0, 1, -10)
collision_layer = 2
collision_mask = 0

[node name="MeshInstance3D" type="MeshInstance3D" parent="Environment/Walls/Wall1"]
mesh = SubResource("BoxMesh_ft5j5")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/Walls/Wall1"]
shape = SubResource("BoxShape3D_dn77b")

[node name="Wall2" type="StaticBody3D" parent="Environment/Walls"]
transform = Transform3D(0.0215531, 0, 0.999768, 0, 1, 0, -0.999768, 0, 0.0215531, 0, 1, 10)
collision_layer = 2
collision_mask = 0

[node name="MeshInstance3D" type="MeshInstance3D" parent="Environment/Walls/Wall2"]
mesh = SubResource("BoxMesh_ft5j5")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/Walls/Wall2"]
shape = SubResource("BoxShape3D_dn77b")

[node name="Wall3" type="StaticBody3D" parent="Environment/Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10, 1, 0)
collision_layer = 2
collision_mask = 0

[node name="MeshInstance3D" type="MeshInstance3D" parent="Environment/Walls/Wall3"]
mesh = SubResource("BoxMesh_ft5j5")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/Walls/Wall3"]
shape = SubResource("BoxShape3D_dn77b")

[node name="Wall4" type="StaticBody3D" parent="Environment/Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 1, 0)
collision_layer = 2
collision_mask = 0

[node name="MeshInstance3D" type="MeshInstance3D" parent="Environment/Walls/Wall4"]
mesh = SubResource("BoxMesh_ft5j5")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/Walls/Wall4"]
shape = SubResource("BoxShape3D_dn77b")

[node name="References" type="Node3D" parent="Environment"]

[node name="Cube1" type="MeshInstance3D" parent="Environment/References"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0.5, -3)
mesh = SubResource("BoxMesh_b5i6k")

[node name="Cube2" type="MeshInstance3D" parent="Environment/References"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 0.5, 3)
mesh = SubResource("BoxMesh_d8kws")

[node name="Cube3" type="MeshInstance3D" parent="Environment/References"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 5)
mesh = SubResource("BoxMesh_igwde")

[node name="Targets" type="Node3D" parent="Environment"]

[node name="CombatTestTarget" parent="Environment/Targets" instance=ExtResource("2_w35bc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 1, 0)

[node name="CombatTestTarget2" parent="Environment/Targets" instance=ExtResource("2_w35bc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.68458, 1, 4.45021)

[node name="CombatTestTarget3" parent="Environment/Targets" instance=ExtResource("2_w35bc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.49137, 1, -6.14782)

[node name="Lighting" type="Node3D" parent="."]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Lighting"]
transform = Transform3D(0.866025, 0.353553, -0.353553, 0, 0.707107, 0.707107, 0.5, -0.612372, 0.612372, 0, 0, 0)
shadow_enabled = true

[node name="Environment" type="WorldEnvironment" parent="Lighting"]
environment = SubResource("Environment_4ojpr")

[node name="UI" type="Node3D" parent="."]

[node name="Control" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="DebugLabel" type="Label" parent="UI/Control"]
layout_mode = 0
offset_left = 10.0
offset_top = 10.0
offset_right = 538.0
offset_bottom = 60.0
text = "WASD: Move | Mouse: Look | Shift: Run | Ctrl: Crouch | Tab: Combat"

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_fnhne")

[node name="NavigationMesh" type="MeshInstance3D" parent="NavigationRegion3D"]
visible = false
mesh = SubResource("BoxMesh_bxdx3")
